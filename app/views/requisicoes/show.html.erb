<div class="container-md d-flex justify-content-center align-items-center">
  <div class="card col-12">
    <h5 class="card-header">Número de Requisicão: <%= @requisicao.numero_requisicao %></h5>
    <div class="card-body">
      <!-- Dados do Paciente -->
      <div class="p-2 bg-secondary bg-opacity-5 border rounded-end">
        <h6 class="text-left font-weight-bold text-white"><i class="fs-4 bi-person"></i> Dados do Paciente</h6>
      </div>

      <dl class="row py-2">
        <dt class="col-sm-4">Nome do Paciente:</dt>
        <dd class="col-sm-8"><%= @requisicao.paciente.nome_paciente %></dd>
        <dt class="col-sm-4">Sexo:</dt>
        <dd class="col-sm-7"><%= @requisicao.paciente.sexo.capitalize %></dd>
        <dt class="col-sm-4">Etnia:</dt>
        <dd class="col-sm-7"><%= @requisicao.paciente.etnia.capitalize %></dd>
        <dt class="col-sm-4">CPF:</dt>
        <dd class="col-sm-7"><%= @requisicao.paciente.cpf_paciente %></dd>
        <dt class="col-sm-4">Data Nascimento:</dt>
        <dd class="col-sm-7"><%= @requisicao.paciente.data_nascimento.strftime('%d/%m/%Y') %></dd>
      </dl>

      <!-- Informações Clínicas -->
      <div class="p-2 bg-secondary bg-opacity-5 border rounded-end">
        <h6 class="text-left font-weight-bold text-white"><i class="fs-4 bi-journal-medical"></i>  Informações Clínicas</h6>
      </div>
      <div class="pt-4">
        <dl class="row py-2">
          <dt class="col-sm-4">Suspeita:</dt>
          <dd class="col-sm-7"><%= @requisicao&.informacao_clinica&.suspeita_diagnostica&.capitalize %></dd>
          <dt class="col-sm-4">Data início de sintomas:</dt>
          <dd class="col-sm-7"><%= @requisicao&.informacao_clinica&.data_inicio_sintomas.strftime('%d/%m/%Y') %></dd>
          <dt class="col-sm-4">Fatores Associados:</dt>
          <dd class="col-sm-7"><%= @requisicao&.informacao_clinica&.fatores_associados&.capitalize %></dd>
          <dt class="col-sm-4">Idade Gestacional:</dt>
          <dd class="col-sm-7"><%= @requisicao&.informacao_clinica&.idade_gestacional || 'Não Informado' %></dd>
          <dt class="col-sm-4">Tipo de caso:</dt>
          <dd class="col-sm-7"><%= @requisicao&.informacao_clinica&.caso&.capitalize %></dd>
          <dt class="col-sm-4">Número de Prontuário:</dt>
          <dd class="col-sm-7"><%= @requisicao&.informacao_clinica&.numero_prontuario %></dd>
        </dl>
      </div>

      <div class="pt-1">
        <dl class="row py-2">
          <dt class="col-sm-4">Lesão Pulmonar:</dt>
          <dd class="col-sm-7"><%= @requisicao&.informacao_clinica&.lesao_pulmonar ? "Sim" : "Não" %></dd>
          <% if @requisicao&.informacao_clinica&.lesao_pulmonar %>
            <dt class="col-sm-4">Localização da Lesão Pulmonar:</dt>
            <dd class="col-sm-7"><%= @requisicao&.informacao_clinica&.localizacao_lesao_pulmonar.humanize %></dd>
          <% end %>
        </dl>
      </div>

      <div class="pt-1">
        <dl class="row py-3">
          <dt class="col-sm-4">Uso de Antifúngicos:</dt>
          <dd class="col-sm-7"><%= @requisicao&.informacao_clinica&.uso_antifungicos ? "Sim" : "Não" %></dd>
          <% if @requisicao&.informacao_clinica&.uso_antifungicos %>
            <dt class="col-sm-4">Tipo de Antifúngicos:</dt>
            <dd class="col-sm-7"><%= @requisicao&.informacao_clinica&.tipo_antifungico.humanize %></dd>
          <% end %>
        </dl>
      </div>
      <div class="pt-1">
        <dl class="row py-2">
          <dt class="col-sm-4">Atividade de Risco:</dt>
          <dd class="col-sm-7"><%= @requisicao&.informacao_clinica&.atividade_risco ? "Sim" : "Não" %></dd>
          <% if @requisicao&.informacao_clinica&.atividade_risco %>
            <dt class="col-sm-4">Tipo de Atividade de Risco:</dt>
            <dd class="col-sm-7"><%= @requisicao&.informacao_clinica&.tipo_atividade_risco.humanize %></dd>
            <dt class="col-sm-4">Tipo de Ocupação:</dt>
            <dd class="col-sm-7"><%= @requisicao&.informacao_clinica&.ocupacao %></dd>
          <% end %>
        </dl>
      </div>

      <!-- Informações Domiciliares -->
      <div class="p-2 bg-secondary bg-opacity-5 border rounded-end">
        <h6 class="text-left font-weight-bold text-white"><i class="fs-4 bi-geo"></i> Amostras</h6>
      </div>

      <table id="dttb" class="table table-striped table-bordered table-hover">
        <thead>
        <tr>
          <th> Num. de Amostra</th>
          <th> Material Biológico</th>
          <th> Status Amostra</th>
        </tr>
        </thead>
        <tbody>
        <% @requisicao.amostras.each do |amostra| %>

        <tr>
            <td><%= amostra.numero_amostra %></td>
            <td><%= amostra.material_biologico.nome_material_biologico %></td>
            <td><%= amostra.status_amostra.descricao%></td>
          </tr>
        <% end %>
        </tbody>
      </table>
    </div>

    <div class="card-footer d-flex justify-content-center align-items-center">
      <%= link_to "Editar Requisição", edit_requisicao_path(@requisicao), class: "btn btn-warning mr-2" %> |
      <%= link_to "Desabilitar Paciente", "#", class:"btn btn-danger ml-2" %>
    </div>
    <div class="row ml-1 mb-1">
    </div>
    <div>
    </div>
    <%= link_to "Back to unidade saudes", unidade_saude_path %>
  </div>
</div>